{% extends 'base.html' %}
{% block title %}{{ product.friendly_name}} Bugs{% endblock %}
{% block content %}

<div class="long-container">
  <p>
    <b>Want something in CrashKit?</b>
    Do <a href="mailto:crashkit@yoursway.com">drop us a line</a>!<br>
    What bug states do you want?<br>
    Do you want all bugs to go into your bug tracker, or do you want to use CrashKit as a sole bug tracker for (some or all) bugs?<br>
  </p>
  
  {% for compartment in compartments %}
    {% if compartment.bugs %}
      <h2>{{ compartment.title }}</h2>
      <div class="clearfix">
        {% for bug in compartment.bugs %}
          <div class="problem-box sev{{ bug.max_severity }} clearfix">
            <a class="dropin" title="{{ bug.bug_name }}" href="bugs/{{ bug.key.name }}/">
              {{bug.occurrence_count|scalenum}}
              <span class="caption">{% ifequal bug.occurrence_count 1 %}occurrence{% else %}occurrences{%endifequal%}</span>
            </a>
              <h2><a href="bugs/{{ bug.key.name }}/">
                  {{ bug.exception_name|escape }}
              </a></h2>
              <p>{{ bug.exception_package|escape|smartshorten:45 }}<br>
              {{ bug.exception_klass|escape|smartshorten:25|split_klass }}<small>.{{ bug.exception_method|smartshorten:20|escape }}&nbsp;<span class="dim">{{ bug.exception_line }}</span></small></p>
            <p class="date">
              {% ifequal bug.first_occurrence_on bug.last_occurrence_on %}
                Occurred {{ bug.first_occurrence_on|naturalday:"%b %d, %Y" }}
              {% else %}
                Occurring from {{ bug.first_occurrence_on|naturalday:"%b %d, %Y" }} till {{ bug.last_occurrence_on|naturalday:"%b %d, %Y"}}
              {% endifequal %}
            </p>
          </div>
    
        {% endfor %}
      </div>
    {% endif %}
  {% endfor %}
</div>

{% endblock %}
